"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[405],{2159:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"snowflake-internal-table-user-stages","title":"Internal Stages, Table Stages, User Stages \u2014 Deep Explanation","description":"A beginner-friendly, story-driven guide to Snowflake stages \u2014 internal, table, and user stages \u2014 with examples and best practices.","source":"@site/docs-snowflake/snowflake-internal-table-user-stages.md","sourceDirName":".","slug":"/snowflake-internal-table-user-stages","permalink":"/snowflake/snowflake-internal-table-user-stages","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"snowflake-internal-table-user-stages","title":"Internal Stages, Table Stages, User Stages \u2014 Deep Explanation","sidebar_label":"Snowflake Stages","description":"A beginner-friendly, story-driven guide to Snowflake stages \u2014 internal, table, and user stages \u2014 with examples and best practices.","keywords":["Snowflake internal stage","Snowflake table stage","Snowflake user stage","Snowflake staging area","Snowflake data load"]},"sidebar":"tutorialSidebar1","previous":{"title":"SQL Basics","permalink":"/snowflake/snowflake-sql-basics"},"next":{"title":"External Stages","permalink":"/snowflake/snowflake-external-stages"}}');var l=s(4848),t=s(8453);const r={id:"snowflake-internal-table-user-stages",title:"Internal Stages, Table Stages, User Stages \u2014 Deep Explanation",sidebar_label:"Snowflake Stages",description:"A beginner-friendly, story-driven guide to Snowflake stages \u2014 internal, table, and user stages \u2014 with examples and best practices.",keywords:["Snowflake internal stage","Snowflake table stage","Snowflake user stage","Snowflake staging area","Snowflake data load"]},i="Internal Stages, Table Stages, User Stages \u2014 Deep Explanation",o={},c=[{value:"\ud83c\udfd7\ufe0f What Are Stages in Snowflake?",id:"\ufe0f-what-are-stages-in-snowflake",level:2},{value:"\ud83d\udd39 1\ufe0f\u20e3 Internal Stage",id:"-1\ufe0f\u20e3-internal-stage",level:2},{value:"\ud83d\udd39 2\ufe0f\u20e3 Table Stage",id:"-2\ufe0f\u20e3-table-stage",level:2},{value:"\ud83d\udd39 3\ufe0f\u20e3 User Stage",id:"-3\ufe0f\u20e3-user-stage",level:2},{value:"\ud83d\udd39 Internal Stage Best Practices",id:"-internal-stage-best-practices",level:2},{value:"\ud83e\udde0 Story Recap \u2014 RetailCo in Action",id:"-story-recap--retailco-in-action",level:2},{value:"\ud83c\udfc1 Quick Summary",id:"-quick-summary",level:2}];function d(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"internal-stages-table-stages-user-stages--deep-explanation",children:"Internal Stages, Table Stages, User Stages \u2014 Deep Explanation"})}),"\n",(0,l.jsxs)(n.p,{children:["Welcome to ",(0,l.jsx)(n.strong,{children:"RetailCo"}),", our fictional retail company.",(0,l.jsx)(n.br,{}),"\n","Your data engineer, Alice, is preparing to ",(0,l.jsx)(n.strong,{children:"load raw sales and inventory data into Snowflake"}),". Before she can load anything, she needs to understand ",(0,l.jsx)(n.strong,{children:"stages"}),", which are temporary storage areas for files in Snowflake."]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u201cThink of stages as your \u2018landing pad\u2019 before data enters the warehouse,\u201d"})," she explains to the team."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Let\u2019s dive into the three main types of Snowflake stages: ",(0,l.jsx)(n.strong,{children:"Internal, Table, and User stages"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-what-are-stages-in-snowflake",children:"\ud83c\udfd7\ufe0f What Are Stages in Snowflake?"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"stage"})," is a ",(0,l.jsx)(n.strong,{children:"location to store files temporarily"})," before loading them into a table.",(0,l.jsx)(n.br,{}),"\n","Files could be:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"CSV"}),"\n",(0,l.jsx)(n.li,{children:"JSON"}),"\n",(0,l.jsx)(n.li,{children:"Parquet"}),"\n",(0,l.jsx)(n.li,{children:"ORC"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Stages help in:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Organizing files"}),"\n",(0,l.jsx)(n.li,{children:"Securing access"}),"\n",(0,l.jsx)(n.li,{children:"Simplifying bulk loads"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"RetailCo scenario:"})," Alice wants to stage daily CSV sales files before loading them into the ",(0,l.jsx)(n.code,{children:"SALES"})," table."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-1\ufe0f\u20e3-internal-stage",children:"\ud83d\udd39 1\ufe0f\u20e3 Internal Stage"}),"\n",(0,l.jsxs)(n.p,{children:["An ",(0,l.jsx)(n.strong,{children:"internal stage"})," lives ",(0,l.jsx)(n.strong,{children:"inside Snowflake"}),".",(0,l.jsx)(n.br,{}),"\n","Snowflake provides three options:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"User stage"})," \u2192 default storage for individual users"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Table stage"})," \u2192 automatically created per table"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Named internal stage"})," \u2192 explicitly created by the user"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Internal stages are ",(0,l.jsx)(n.strong,{children:"simple, secure, and fast"})," because they reside within Snowflake."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-2\ufe0f\u20e3-table-stage",children:"\ud83d\udd39 2\ufe0f\u20e3 Table Stage"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"table stage"})," is ",(0,l.jsx)(n.strong,{children:"automatically created when you create a table"}),".",(0,l.jsx)(n.br,{}),"\n","It is tied directly to the table:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No need to manually create a stage"}),"\n",(0,l.jsx)(n.li,{children:"Files loaded here are usually specific to the table"}),"\n",(0,l.jsx)(n.li,{children:"Convenient for small or per-table loads"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"RetailCo example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE OR REPLACE TABLE SALES (\r\n    SALE_ID INT,\r\n    PRODUCT_ID INT,\r\n    QUANTITY INT,\r\n    SALE_DATE DATE\r\n);\r\n-- Snowflake automatically creates a stage at @%SALES\n"})}),"\n",(0,l.jsx)(n.p,{children:"Alice can now upload files directly to the table stage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"PUT file://sales_jan.csv @%SALES;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Then load it with:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"COPY INTO SALES;\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-3\ufe0f\u20e3-user-stage",children:"\ud83d\udd39 3\ufe0f\u20e3 User Stage"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"user stage"})," is ",(0,l.jsx)(n.strong,{children:"unique to each Snowflake user"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Location: ",(0,l.jsx)(n.code,{children:"@~"})]}),"\n",(0,l.jsx)(n.li,{children:"Useful for personal or temporary files"}),"\n",(0,l.jsx)(n.li,{children:"Great for testing or development"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"RetailCo example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"PUT file://new_products.csv @~;\r\nCOPY INTO PRODUCTS FROM @~ FILE_FORMAT = (TYPE = CSV);\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Alice can safely experiment without affecting shared table stages."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-internal-stage-best-practices",children:"\ud83d\udd39 Internal Stage Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use table stages for table-specific loads"})," \u2192 keeps things organized"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use user stages for personal testing"})," \u2192 avoids conflicts"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Clean up staged files after loading"})," \u2192 reduces storage cost"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"REMOVE @%SALES PATTERN='.*\\.csv';\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Leverage named internal stages"})," for reusable or shared loads:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE STAGE RAW_SALES_STAGE;\r\nPUT file://*.csv @RAW_SALES_STAGE;\r\nCOPY INTO SALES FROM @RAW_SALES_STAGE;\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-story-recap--retailco-in-action",children:"\ud83e\udde0 Story Recap \u2014 RetailCo in Action"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Daily sales CSVs arrive at RetailCo"}),"\n",(0,l.jsxs)(n.li,{children:["Alice uploads them to ",(0,l.jsxs)(n.strong,{children:["table stage ",(0,l.jsx)(n.code,{children:"@%SALES"})]})]}),"\n",(0,l.jsxs)(n.li,{children:["QA team tests new inventory file in ",(0,l.jsxs)(n.strong,{children:["user stage ",(0,l.jsx)(n.code,{children:"@~"})]})]}),"\n",(0,l.jsxs)(n.li,{children:["Shared loads use ",(0,l.jsxs)(n.strong,{children:["named internal stage ",(0,l.jsx)(n.code,{children:"@RAW_SALES_STAGE"})]})," for consistent access"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Result: ",(0,l.jsx)(n.strong,{children:"Data is staged efficiently, securely, and ready for fast loading into Snowflake tables"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-quick-summary",children:"\ud83c\udfc1 Quick Summary"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Stages"})," = temporary storage locations in Snowflake for files before loading into tables"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["Table Stage (",(0,l.jsx)(n.code,{children:"@%table_name"}),")"]})," \u2192 tied to a specific table, automatically created"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["User Stage (",(0,l.jsx)(n.code,{children:"@~"}),")"]})," \u2192 personal stage for testing and development"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["Named Internal Stage (",(0,l.jsx)(n.code,{children:"@stage_name"}),")"]})," \u2192 reusable, shared internal stage"]}),"\n",(0,l.jsxs)(n.li,{children:["Best practices: ",(0,l.jsx)(n.strong,{children:"organize by stage type, clean up after load, and use named stages for shared workflows"})]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"-coming-next",children:"\ud83d\ude80 Coming Next"}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,l.jsx)(n.strong,{children:"External Stages (S3, Azure, GCS) \u2014 Real Company Setup Example"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var a=s(6540);const l={},t=a.createContext(l);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);