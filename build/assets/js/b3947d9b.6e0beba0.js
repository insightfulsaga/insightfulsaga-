"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[7533],{8367:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"delta-lake-overview","title":"Delta Lake Overview \u2014 The Storage Layer of Databricks","description":"A clear, story-style explanation of Delta Lake, why it was created, and how it delivers reliability, ACID transactions, schema enforcement, and time travel in the Databricks Lakehouse.","source":"@site/docs-databricks/delta-lake-overview.md","sourceDirName":".","slug":"/delta-lake-overview","permalink":"/databricks/delta-lake-overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"delta-lake-overview","title":"Delta Lake Overview \u2014 The Storage Layer of Databricks","sidebar_label":"Delta Lake Overview","description":"A clear, story-style explanation of Delta Lake, why it was created, and how it delivers reliability, ACID transactions, schema enforcement, and time travel in the Databricks Lakehouse.","keywords":["Delta Lake","Databricks Delta","Lakehouse architecture","ACID transactions","data reliability","time travel"]},"sidebar":"tutorialSidebar2","previous":{"title":"Managed vs External Tables","permalink":"/databricks/databricks-managed-vs-external-tables"},"next":{"title":"Medallion Model (Bronze / Silver / Gold)","permalink":"/databricks/lakehouse-medallion-model"}}');var t=n(4848),s=n(8453);const l={id:"delta-lake-overview",title:"Delta Lake Overview \u2014 The Storage Layer of Databricks",sidebar_label:"Delta Lake Overview",description:"A clear, story-style explanation of Delta Lake, why it was created, and how it delivers reliability, ACID transactions, schema enforcement, and time travel in the Databricks Lakehouse.",keywords:["Delta Lake","Databricks Delta","Lakehouse architecture","ACID transactions","data reliability","time travel"]},i="Delta Lake Overview \u2014 The Storage Layer of Databricks",d={},o=[{value:"\ud83c\udf27 A Story: When Data Lakes Started Falling Apart",id:"-a-story-when-data-lakes-started-falling-apart",level:2},{value:"\ud83d\udc8e What Is Delta Lake (In Simple Words)?",id:"-what-is-delta-lake-in-simple-words",level:2},{value:"\u2714 ACID Transactions",id:"-acid-transactions",level:3},{value:"\u2714 Unified Batch + Streaming",id:"-unified-batch--streaming",level:3},{value:"\u2714 Schema Enforcement",id:"-schema-enforcement",level:3},{value:"\u2714 Schema Evolution",id:"-schema-evolution",level:3},{value:"\u2714 Time Travel",id:"-time-travel",level:3},{value:"\u2714 Performance Optimizations",id:"-performance-optimizations",level:3},{value:"\ud83d\udd0d Why Delta Lake Matters",id:"-why-delta-lake-matters",level:2},{value:"\ud83d\uddc2 How Data Is Stored",id:"-how-data-is-stored",level:2},{value:"\ud83e\uddea A Simple Delta Table Example",id:"-a-simple-delta-table-example",level:2},{value:"\ud83d\udd04 Time Travel Example",id:"-time-travel-example",level:2},{value:"\u2699\ufe0f Updates &amp; Deletes (Yes, You Can!)",id:"\ufe0f-updates--deletes-yes-you-can",level:2},{value:"\ud83d\ude80 Performance Features You Get Automatically",id:"-performance-features-you-get-automatically",level:2},{value:"<strong>OPTIMIZE</strong>",id:"optimize",level:3},{value:"<strong>ZORDER</strong>",id:"zorder",level:3},{value:"\ud83e\udde0 When to Use Delta Lake",id:"-when-to-use-delta-lake",level:2},{value:"\ud83d\udcd8 Summary",id:"-summary",level:2}];function c(e){const a={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"delta-lake-overview--the-storage-layer-of-databricks",children:"Delta Lake Overview \u2014 The Storage Layer of Databricks"})}),"\n",(0,t.jsx)(a.h2,{id:"-a-story-when-data-lakes-started-falling-apart",children:"\ud83c\udf27 A Story: When Data Lakes Started Falling Apart"}),"\n",(0,t.jsx)(a.p,{children:"Before Delta Lake existed, data engineers had a big problem."}),"\n",(0,t.jsx)(a.p,{children:"Data lakes were:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Open"}),"\n",(0,t.jsx)(a.li,{children:"Cheap"}),"\n",(0,t.jsx)(a.li,{children:"Scalable"}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:["\u2026",(0,t.jsx)(a.strong,{children:"but extremely unreliable"}),"."]}),"\n",(0,t.jsx)(a.p,{children:"Imagine trying to run analytics while:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Files are half-written"}),"\n",(0,t.jsx)(a.li,{children:"Schemas change randomly"}),"\n",(0,t.jsx)(a.li,{children:"Two jobs write to the same folder"}),"\n",(0,t.jsx)(a.li,{children:"One bad job corrupts yesterday\u2019s data"}),"\n",(0,t.jsx)(a.li,{children:"Queries return different results depending on timing"}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:["People loved data lakes for flexibility,",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.strong,{children:"but they hated them for inconsistency."})]}),"\n",(0,t.jsxs)(a.p,{children:["Databricks created ",(0,t.jsx)(a.strong,{children:"Delta Lake"})," to fix this forever."]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-what-is-delta-lake-in-simple-words",children:"\ud83d\udc8e What Is Delta Lake (In Simple Words)?"}),"\n",(0,t.jsxs)(a.p,{children:["Delta Lake is a ",(0,t.jsx)(a.strong,{children:"reliable storage layer"})," on top of your cloud files."]}),"\n",(0,t.jsxs)(a.p,{children:["It brings ",(0,t.jsx)(a.strong,{children:"database-like reliability"})," to your data lake."]}),"\n",(0,t.jsx)(a.h3,{id:"-acid-transactions",children:"\u2714 ACID Transactions"}),"\n",(0,t.jsx)(a.p,{children:"Ensures your data is always correct \u2014 even during failures."}),"\n",(0,t.jsx)(a.h3,{id:"-unified-batch--streaming",children:"\u2714 Unified Batch + Streaming"}),"\n",(0,t.jsx)(a.p,{children:"Same table can handle both."}),"\n",(0,t.jsx)(a.h3,{id:"-schema-enforcement",children:"\u2714 Schema Enforcement"}),"\n",(0,t.jsx)(a.p,{children:"Rejects bad data that doesn\u2019t match the expected structure."}),"\n",(0,t.jsx)(a.h3,{id:"-schema-evolution",children:"\u2714 Schema Evolution"}),"\n",(0,t.jsx)(a.p,{children:"Supports new columns with a simple setting."}),"\n",(0,t.jsx)(a.h3,{id:"-time-travel",children:"\u2714 Time Travel"}),"\n",(0,t.jsxs)(a.p,{children:["You can query your table ",(0,t.jsx)(a.em,{children:"as it was yesterday, last week, or last year"}),"."]}),"\n",(0,t.jsx)(a.h3,{id:"-performance-optimizations",children:"\u2714 Performance Optimizations"}),"\n",(0,t.jsx)(a.p,{children:"Files are automatically compacted and indexed."}),"\n",(0,t.jsxs)(a.p,{children:["The magic happens in a folder called ",(0,t.jsx)(a.strong,{children:"_delta_log"})," \u2014",(0,t.jsx)(a.br,{}),"\n","it tracks every operation, like a \u201cversion history\u201d for your data."]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-why-delta-lake-matters",children:"\ud83d\udd0d Why Delta Lake Matters"}),"\n",(0,t.jsxs)(a.p,{children:["Think of Delta Lake as the ",(0,t.jsx)(a.strong,{children:"\u201cbrain\u201d"})," of the Lakehouse."]}),"\n",(0,t.jsx)(a.p,{children:"It transforms unreliable raw cloud storage into:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Consistent"}),"\n",(0,t.jsx)(a.li,{children:"Trusted"}),"\n",(0,t.jsx)(a.li,{children:"Transactional"}),"\n",(0,t.jsx)(a.li,{children:"Query-friendly"}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"data."}),"\n",(0,t.jsx)(a.p,{children:"Without Delta Lake, the Lakehouse would be \u201cjust another data lake.\u201d"}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-how-data-is-stored",children:"\ud83d\uddc2 How Data Is Stored"}),"\n",(0,t.jsx)(a.p,{children:"A Delta table is simply:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Your data files"})," (Parquet)"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"A transaction log"})," (",(0,t.jsx)(a.code,{children:"_delta_log"}),")"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"This log contains:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Versions"}),"\n",(0,t.jsx)(a.li,{children:"Schema changes"}),"\n",(0,t.jsx)(a.li,{children:"Inserts/updates/deletes"}),"\n",(0,t.jsx)(a.li,{children:"Optimizations"}),"\n",(0,t.jsx)(a.li,{children:"Compaction history"}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"You can even open the JSON files inside the log to see everything."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-a-simple-delta-table-example",children:"\ud83e\uddea A Simple Delta Table Example"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:'df = spark.read.format("csv").load("/mnt/raw/customers")\r\n\r\n(df.write\r\n    .format("delta")\r\n    .save("/mnt/bronze/customers"))\n'})}),"\n",(0,t.jsx)(a.p,{children:"Now this folder contains:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{children:"customers/\r\n   part-0001.snappy.parquet\r\n   part-0002.snappy.parquet\r\n   _delta_log/\r\n       00000000000000000000.json\n"})}),"\n",(0,t.jsxs)(a.p,{children:["Congratulations \u2014\r\nyou just created a ",(0,t.jsx)(a.strong,{children:"real Delta Lake table"}),"."]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-time-travel-example",children:"\ud83d\udd04 Time Travel Example"}),"\n",(0,t.jsx)(a.p,{children:"You can query a previous version:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"SELECT * FROM customers VERSION AS OF 5;\n"})}),"\n",(0,t.jsx)(a.p,{children:"Or by timestamp:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"SELECT * FROM customers TIMESTAMP AS OF '2024-01-01';\n"})}),"\n",(0,t.jsx)(a.p,{children:"Perfect for debugging, auditing, and safe rollbacks."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"\ufe0f-updates--deletes-yes-you-can",children:"\u2699\ufe0f Updates & Deletes (Yes, You Can!)"}),"\n",(0,t.jsx)(a.p,{children:"Unlike parquet folders, Delta supports real SQL operations:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"UPDATE customers\r\nSET status = 'inactive'\r\nWHERE last_login < '2023-01-01';\n"})}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"DELETE FROM customers WHERE id IS NULL;\n"})}),"\n",(0,t.jsx)(a.p,{children:"Traditional data lakes cannot do this cleanly."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-performance-features-you-get-automatically",children:"\ud83d\ude80 Performance Features You Get Automatically"}),"\n",(0,t.jsx)(a.h3,{id:"optimize",children:(0,t.jsx)(a.strong,{children:"OPTIMIZE"})}),"\n",(0,t.jsx)(a.p,{children:"Combines many small files \u2192 fewer files, faster reads."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"OPTIMIZE customers;\n"})}),"\n",(0,t.jsx)(a.h3,{id:"zorder",children:(0,t.jsx)(a.strong,{children:"ZORDER"})}),"\n",(0,t.jsx)(a.p,{children:"Indexes data by columns \u2192 faster selective queries."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sql",children:"OPTIMIZE customers ZORDER BY (customer_id);\n"})}),"\n",(0,t.jsx)(a.p,{children:"These features keep your Lakehouse fast as it grows."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-when-to-use-delta-lake",children:"\ud83e\udde0 When to Use Delta Lake"}),"\n",(0,t.jsx)(a.p,{children:"Use Delta Lake when your data needs:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Reliability"}),"\n",(0,t.jsx)(a.li,{children:"Versioning"}),"\n",(0,t.jsx)(a.li,{children:"Consistency"}),"\n",(0,t.jsx)(a.li,{children:"Streaming + batch combined"}),"\n",(0,t.jsx)(a.li,{children:"Production-quality pipelines"}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"It\u2019s the default storage for everything in Databricks."}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"-summary",children:"\ud83d\udcd8 Summary"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:["Delta Lake makes cloud storage reliable by adding ",(0,t.jsx)(a.strong,{children:"ACID transactions"}),", ",(0,t.jsx)(a.strong,{children:"schema enforcement"}),", ",(0,t.jsx)(a.strong,{children:"time travel"}),", and ",(0,t.jsx)(a.strong,{children:"performance optimization"}),"."]}),"\n",(0,t.jsx)(a.li,{children:"A Delta table is simply Parquet files + a transaction log."}),"\n",(0,t.jsx)(a.li,{children:"You can run updates, deletes, merges, and versioned queries."}),"\n",(0,t.jsx)(a.li,{children:"It powers the entire Databricks Lakehouse."}),"\n",(0,t.jsx)(a.li,{children:"Without Delta Lake, you'd struggle with inconsistent, broken, untrustworthy data."}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:["Delta Lake is the foundation that makes the Lakehouse ",(0,t.jsx)(a.em,{children:"work"}),"."]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h1,{id:"-next-topic",children:"\ud83d\udc49 Next Topic"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.strong,{children:"Bronze / Silver / Gold Layers \u2014 Lakehouse Medallion Model"})})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>l,x:()=>i});var r=n(6540);const t={},s=r.createContext(t);function l(e){const a=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);