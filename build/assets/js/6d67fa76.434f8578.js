"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[7752],{7023:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"service-principals-machine-identity-for-automation","title":"Service Principals \u2014 Machine Identity for Automation","description":"Learn how to use Service Principals in Databricks to automate workflows and manage machine identities securely in your environment.","source":"@site/docs-databricks/service-principals-machine-identity-for-automation.md","sourceDirName":".","slug":"/service-principals-machine-identity-for-automation","permalink":"/databricks/service-principals-machine-identity-for-automation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"service-principals-machine-identity-for-automation","title":"Service Principals \u2014 Machine Identity for Automation","sidebar_label":"Service Principals","description":"Learn how to use Service Principals in Databricks to automate workflows and manage machine identities securely in your environment.","keywords":["Service Principals","Databricks Automation","Machine Identity","Azure Databricks","Databricks Security","Identity Management"]},"sidebar":"tutorialSidebar2","previous":{"title":"Secret Scopes","permalink":"/databricks/secret-scopes-secure-credential-management"},"next":{"title":"Auditing & Monitoring","permalink":"/databricks/auditing-monitoring-logs-events-access-monitoring"}}');var s=n(4848),t=n(8453);const c={id:"service-principals-machine-identity-for-automation",title:"Service Principals \u2014 Machine Identity for Automation",sidebar_label:"Service Principals",description:"Learn how to use Service Principals in Databricks to automate workflows and manage machine identities securely in your environment.",keywords:["Service Principals","Databricks Automation","Machine Identity","Azure Databricks","Databricks Security","Identity Management"]},a="Service Principals \u2014 Machine Identity for Automation",o={},l=[{value:"\ud83e\udd16 What Are Service Principals?",id:"-what-are-service-principals",level:2},{value:"\ud83d\udd11 How Service Principals Work in Databricks",id:"-how-service-principals-work-in-databricks",level:2},{value:"Key Features:",id:"key-features",level:3},{value:"\ud83d\udee0 How to Create and Use a Service Principal in Databricks",id:"-how-to-create-and-use-a-service-principal-in-databricks",level:2},{value:"1. <strong>Create a Service Principal in Azure Active Directory (AAD)</strong>",id:"1-create-a-service-principal-in-azure-active-directory-aad",level:3},{value:"2. <strong>Create a Client Secret for Authentication</strong>",id:"2-create-a-client-secret-for-authentication",level:3},{value:"3. <strong>Grant the Service Principal Permissions in Databricks</strong>",id:"3-grant-the-service-principal-permissions-in-databricks",level:3},{value:"4. <strong>Use the Service Principal for Authentication in Databricks</strong>",id:"4-use-the-service-principal-for-authentication-in-databricks",level:3},{value:"\ud83d\ude80 Benefits of Using Service Principals",id:"-benefits-of-using-service-principals",level:2},{value:"1. <strong>Security</strong>",id:"1-security",level:3},{value:"2. <strong>Automation</strong>",id:"2-automation",level:3},{value:"3. <strong>Access Control</strong>",id:"3-access-control",level:3},{value:"4. <strong>Cross-Service Integration</strong>",id:"4-cross-service-integration",level:3},{value:"\ud83e\udde0 When to Use Service Principals",id:"-when-to-use-service-principals",level:2},{value:"\ud83d\udcca Architecture Overview of Service Principals",id:"-architecture-overview-of-service-principals",level:2},{value:"\ud83d\udcd8 Summary",id:"-summary",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"service-principals--machine-identity-for-automation",children:"Service Principals \u2014 Machine Identity for Automation"})}),"\n",(0,s.jsx)(i.h2,{id:"-what-are-service-principals",children:"\ud83e\udd16 What Are Service Principals?"}),"\n",(0,s.jsxs)(i.p,{children:["In a modern data pipeline, automating workflows, running scheduled jobs, or integrating services across different platforms often requires ",(0,s.jsx)(i.strong,{children:"machine identities"})," \u2014 identities that are used by applications, services, or automation tools instead of human users."]}),"\n",(0,s.jsxs)(i.p,{children:["In ",(0,s.jsx)(i.strong,{children:"Azure Databricks"}),", a ",(0,s.jsx)(i.strong,{children:"Service Principal"})," acts as a ",(0,s.jsx)(i.strong,{children:"machine identity"})," that can be used to automate tasks and grant access to resources securely, without requiring the use of personal user credentials."]}),"\n",(0,s.jsx)(i.p,{children:"Service Principals are especially valuable for:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Automation"}),": Running scheduled jobs, pipelines, or services."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Security"}),": Ensuring that automation tools don\u2019t rely on personal credentials."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Access Control"}),": Limiting access to resources based on the machine identity."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["In this guide, we\u2019ll explore how ",(0,s.jsx)(i.strong,{children:"Service Principals"})," work in Databricks, their use cases, and how to set them up for secure automation."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-how-service-principals-work-in-databricks",children:"\ud83d\udd11 How Service Principals Work in Databricks"}),"\n",(0,s.jsxs)(i.p,{children:["A ",(0,s.jsx)(i.strong,{children:"Service Principal"})," is essentially a security identity used by ",(0,s.jsx)(i.strong,{children:"automated processes"})," or applications to authenticate and access resources. It is commonly used in ",(0,s.jsx)(i.strong,{children:"Azure Active Directory (AAD)"})," to enable applications or automation scripts to authenticate with Databricks and access services or resources."]}),"\n",(0,s.jsx)(i.h3,{id:"key-features",children:"Key Features:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Machine Identity"}),": A Service Principal is a non-human identity that can authenticate and access resources on behalf of automation scripts or services."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Access Control"}),": You can assign permissions to a Service Principal to access specific Databricks resources (e.g., clusters, jobs, notebooks) and define what actions it can perform."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Secure Authentication"}),": Service Principals authenticate using ",(0,s.jsx)(i.strong,{children:"client secrets"})," or ",(0,s.jsx)(i.strong,{children:"certificates"}),", removing the need for human credentials in automation scenarios."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Service Principals are essential for use cases like:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Automating ",(0,s.jsx)(i.strong,{children:"ETL pipelines"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Running scheduled ",(0,s.jsx)(i.strong,{children:"Databricks Jobs"})," without relying on user credentials."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Cross-service authentication"})," to allow Databricks to communicate with other Azure services securely."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-how-to-create-and-use-a-service-principal-in-databricks",children:"\ud83d\udee0 How to Create and Use a Service Principal in Databricks"}),"\n",(0,s.jsxs)(i.h3,{id:"1-create-a-service-principal-in-azure-active-directory-aad",children:["1. ",(0,s.jsx)(i.strong,{children:"Create a Service Principal in Azure Active Directory (AAD)"})]}),"\n",(0,s.jsxs)(i.p,{children:["To use a Service Principal in Databricks, you first need to create it in ",(0,s.jsx)(i.strong,{children:"Azure Active Directory"})," (Azure AD)."]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Log into the Azure Portal"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Navigate to Azure Active Directory"})," > ",(0,s.jsx)(i.strong,{children:"App Registrations"})," > ",(0,s.jsx)(i.strong,{children:"New Registration"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Fill out the registration form"})," with your app's name and redirect URI, then click ",(0,s.jsx)(i.strong,{children:"Register"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Once registered, note the ",(0,s.jsx)(i.strong,{children:"Application (client) ID"})," and ",(0,s.jsx)(i.strong,{children:"Directory (tenant) ID"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"2-create-a-client-secret-for-authentication",children:["2. ",(0,s.jsx)(i.strong,{children:"Create a Client Secret for Authentication"})]}),"\n",(0,s.jsxs)(i.p,{children:["A ",(0,s.jsx)(i.strong,{children:"client secret"})," is used to authenticate the Service Principal."]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["In your ",(0,s.jsx)(i.strong,{children:"App Registration"})," page, go to ",(0,s.jsx)(i.strong,{children:"Certificates & Secrets"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Under ",(0,s.jsx)(i.strong,{children:"Client Secrets"}),", click ",(0,s.jsx)(i.strong,{children:"New Client Secret"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Add a description and set the expiration date, then click ",(0,s.jsx)(i.strong,{children:"Add"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Note down the ",(0,s.jsx)(i.strong,{children:"client secret"})," value."]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"3-grant-the-service-principal-permissions-in-databricks",children:["3. ",(0,s.jsx)(i.strong,{children:"Grant the Service Principal Permissions in Databricks"})]}),"\n",(0,s.jsx)(i.p,{children:"After creating the Service Principal, you need to assign permissions for it to interact with Databricks resources."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Go to the ",(0,s.jsx)(i.strong,{children:"Databricks workspace"})," and navigate to ",(0,s.jsx)(i.strong,{children:"Admin Console"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Under ",(0,s.jsx)(i.strong,{children:"Service Principal Permissions"}),", click ",(0,s.jsx)(i.strong,{children:"Add"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Choose your Service Principal (by its ",(0,s.jsx)(i.strong,{children:"Application ID"})," or ",(0,s.jsx)(i.strong,{children:"App Name"}),"), and grant the required permissions (e.g., access to clusters, jobs, etc.)."]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"4-use-the-service-principal-for-authentication-in-databricks",children:["4. ",(0,s.jsx)(i.strong,{children:"Use the Service Principal for Authentication in Databricks"})]}),"\n",(0,s.jsx)(i.p,{children:"You can now authenticate using the Service Principal in your Databricks notebooks, jobs, or APIs."}),"\n",(0,s.jsxs)(i.p,{children:["Example: ",(0,s.jsx)(i.strong,{children:"Authenticating using a Service Principal in Databricks"})," (via Python)"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:'from azure.identity import ClientSecretCredential\r\nfrom databricks_api import DatabricksAPI\r\n\r\n# Client credentials\r\nclient_id = "<your-client-id>"\r\ntenant_id = "<your-tenant-id>"\r\nclient_secret = "<your-client-secret>"\r\n\r\n# Authenticate using the Service Principal\r\ncredentials = ClientSecretCredential(client_id=client_id, tenant_id=tenant_id, client_secret=client_secret)\r\n\r\n# Create a Databricks API client\r\ndb_api = DatabricksAPI(credentials=credentials)\r\n\r\n# Example: List clusters\r\nclusters = db_api.clusters.list()\r\nprint(clusters)\n'})}),"\n",(0,s.jsx)(i.p,{children:"In this example:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["The ",(0,s.jsx)(i.strong,{children:"Service Principal"})," authenticates using the client ID, tenant ID, and client secret."]}),"\n",(0,s.jsxs)(i.li,{children:["The ",(0,s.jsx)(i.strong,{children:"Databricks API"})," client is created using this authentication, allowing automation tasks such as listing clusters."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-benefits-of-using-service-principals",children:"\ud83d\ude80 Benefits of Using Service Principals"}),"\n",(0,s.jsxs)(i.h3,{id:"1-security",children:["1. ",(0,s.jsx)(i.strong,{children:"Security"})]}),"\n",(0,s.jsxs)(i.p,{children:["Service Principals ensure that your ",(0,s.jsx)(i.strong,{children:"automated processes"})," don\u2019t rely on ",(0,s.jsx)(i.strong,{children:"personal credentials"}),", reducing the risk of human error or security breaches. Service Principals are also ",(0,s.jsx)(i.strong,{children:"granular"})," \u2014 you can assign specific permissions to them based on their role in your workflows."]}),"\n",(0,s.jsxs)(i.h3,{id:"2-automation",children:["2. ",(0,s.jsx)(i.strong,{children:"Automation"})]}),"\n",(0,s.jsxs)(i.p,{children:["Service Principals enable you to automate tasks like ",(0,s.jsx)(i.strong,{children:"ETL pipelines"}),", ",(0,s.jsx)(i.strong,{children:"batch jobs"}),", or ",(0,s.jsx)(i.strong,{children:"data processing"})," workflows in Databricks. This ensures that your jobs run on time and without requiring manual intervention."]}),"\n",(0,s.jsxs)(i.h3,{id:"3-access-control",children:["3. ",(0,s.jsx)(i.strong,{children:"Access Control"})]}),"\n",(0,s.jsxs)(i.p,{children:["With Service Principals, you can enforce ",(0,s.jsx)(i.strong,{children:"least-privilege access"})," by granting them only the permissions they need. You can specify which ",(0,s.jsx)(i.strong,{children:"Databricks resources"})," the Service Principal can access, ensuring that sensitive data is only available to trusted services."]}),"\n",(0,s.jsxs)(i.h3,{id:"4-cross-service-integration",children:["4. ",(0,s.jsx)(i.strong,{children:"Cross-Service Integration"})]}),"\n",(0,s.jsxs)(i.p,{children:["Service Principals can be used to authenticate and grant access to ",(0,s.jsx)(i.strong,{children:"Azure resources"})," like ",(0,s.jsx)(i.strong,{children:"Blob Storage"}),", ",(0,s.jsx)(i.strong,{children:"Key Vault"}),", or ",(0,s.jsx)(i.strong,{children:"Azure SQL Database"})," \u2014 making them a key component of cross-platform automation in cloud environments."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-when-to-use-service-principals",children:"\ud83e\udde0 When to Use Service Principals"}),"\n",(0,s.jsx)(i.p,{children:"Use Service Principals if:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["You need to automate ",(0,s.jsx)(i.strong,{children:"Databricks Jobs"}),", pipelines, or workflows without relying on human credentials."]}),"\n",(0,s.jsxs)(i.li,{children:["You want to enforce ",(0,s.jsx)(i.strong,{children:"security"})," and ",(0,s.jsx)(i.strong,{children:"access control"})," in your automated tasks."]}),"\n",(0,s.jsxs)(i.li,{children:["You need a ",(0,s.jsx)(i.strong,{children:"machine identity"})," for authentication between ",(0,s.jsx)(i.strong,{children:"Databricks"})," and other ",(0,s.jsx)(i.strong,{children:"Azure"})," or ",(0,s.jsx)(i.strong,{children:"cloud"})," resources."]}),"\n",(0,s.jsxs)(i.li,{children:["You are building ",(0,s.jsx)(i.strong,{children:"cross-service integrations"})," and need a secure, scalable way to manage authentication."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Avoid Service Principals if:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["You only have a ",(0,s.jsx)(i.strong,{children:"small project"})," and don\u2019t need automation or machine identities."]}),"\n",(0,s.jsxs)(i.li,{children:["You don\u2019t require ",(0,s.jsx)(i.strong,{children:"granular access control"})," for automated services."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-architecture-overview-of-service-principals",children:"\ud83d\udcca Architecture Overview of Service Principals"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"Databricks Workspace\r\n      \u2193 Service Principal\r\n   (Machine Identity)  \r\n      \u2193 Secure Access (via Permissions)\r\n       \u2194 Databricks Jobs, Clusters, Notebooks, APIs\r\n      \u2194 Azure Resources (e.g., Key Vault, Blob Storage)\n"})}),"\n",(0,s.jsxs)(i.p,{children:["In this architecture, ",(0,s.jsx)(i.strong,{children:"Service Principals"})," provide a ",(0,s.jsx)(i.strong,{children:"secure"})," machine identity that can authenticate and access ",(0,s.jsx)(i.strong,{children:"Databricks resources"})," and ",(0,s.jsx)(i.strong,{children:"Azure services"}),", ensuring ",(0,s.jsx)(i.strong,{children:"controlled"})," access for automation and integration."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-summary",children:"\ud83d\udcd8 Summary"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Service Principals"})," are a key component for automating workflows and ensuring secure, scalable, and controlled access to resources in Databricks. By using ",(0,s.jsx)(i.strong,{children:"machine identities"})," instead of personal credentials, you can ",(0,s.jsx)(i.strong,{children:"automate jobs"}),", ensure ",(0,s.jsx)(i.strong,{children:"least-privilege access"}),", and integrate ",(0,s.jsx)(i.strong,{children:"Databricks"})," with other ",(0,s.jsx)(i.strong,{children:"Azure"})," services securely."]}),"\n",(0,s.jsxs)(i.p,{children:["Whether you\u2019re running scheduled jobs or integrating Databricks with other systems, Service Principals offer a flexible and secure way to manage ",(0,s.jsx)(i.strong,{children:"machine-to-machine authentication"})," and automate your data workflows."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h1,{id:"-next-topic",children:"\ud83d\udc49 Next Topic"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Auditing & Monitoring \u2014 Logs, Events & Access Monitoring"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{})})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>a});var r=n(6540);const s={},t=r.createContext(s);function c(e){const i=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);