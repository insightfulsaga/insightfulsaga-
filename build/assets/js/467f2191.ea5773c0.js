"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[7535],{4134:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"snowflake-performance-tuning","title":"Performance Tuning Techniques for Daily Company Work","description":"A practical story-driven guide to Snowflake performance tuning techniques for everyday company workloads, including query optimization, warehouse sizing, caching, clustering, and best practices.","source":"@site/docs-snowflake/snowflake-performance-tuning.md","sourceDirName":".","slug":"/snowflake-performance-tuning","permalink":"/snowflake/snowflake-performance-tuning","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"snowflake-performance-tuning","title":"Performance Tuning Techniques for Daily Company Work","sidebar_label":"Performance Tuning","description":"A practical story-driven guide to Snowflake performance tuning techniques for everyday company workloads, including query optimization, warehouse sizing, caching, clustering, and best practices.","keywords":["Snowflake performance tuning","Snowflake query optimization","Snowflake best practices","Snowflake daily workloads","Snowflake ETL performance","Snowflake dashboard optimization"]},"sidebar":"tutorialSidebar1","previous":{"title":"Snowflake Caching","permalink":"/snowflake/snowflake-caching"},"next":{"title":"Semi-Structured Data","permalink":"/snowflake/snowflake-semi-structured-data"}}');var s=i(4848),l=i(8453);const o={id:"snowflake-performance-tuning",title:"Performance Tuning Techniques for Daily Company Work",sidebar_label:"Performance Tuning",description:"A practical story-driven guide to Snowflake performance tuning techniques for everyday company workloads, including query optimization, warehouse sizing, caching, clustering, and best practices.",keywords:["Snowflake performance tuning","Snowflake query optimization","Snowflake best practices","Snowflake daily workloads","Snowflake ETL performance","Snowflake dashboard optimization"]},t="Performance Tuning Techniques for Daily Company Work",a={},c=[{value:"\u2728 Story Time \u2014 \u201cWhy Is My ETL Slower Than Yesterday?\u201d",id:"-story-time--why-is-my-etl-slower-than-yesterday",level:2},{value:"\ud83e\uddf1 1\ufe0f\u20e3 Optimize Warehouse Usage",id:"-1\ufe0f\u20e3-optimize-warehouse-usage",level:2},{value:"2\ufe0f\u20e3 Leverage Caching",id:"2\ufe0f\u20e3-leverage-caching",level:2},{value:"3\ufe0f\u20e3 Use Clustering Keys Smartly",id:"3\ufe0f\u20e3-use-clustering-keys-smartly",level:2},{value:"4\ufe0f\u20e3 Query Optimization Techniques",id:"4\ufe0f\u20e3-query-optimization-techniques",level:2},{value:"5\ufe0f\u20e3 Optimize Joins",id:"5\ufe0f\u20e3-optimize-joins",level:2},{value:"6\ufe0f\u20e3 Partitioning &amp; Micro-Partition Awareness",id:"6\ufe0f\u20e3-partitioning--micro-partition-awareness",level:2},{value:"7\ufe0f\u20e3 Monitor &amp; Tune Regularly",id:"7\ufe0f\u20e3-monitor--tune-regularly",level:2},{value:"\ud83e\uddea Real-World Story \u2014 Meera Fixes Slow ETL",id:"-real-world-story--meera-fixes-slow-etl",level:2},{value:"\ud83d\udca1 Key Takeaways",id:"-key-takeaways",level:2},{value:"\ud83d\udcd8 Summary",id:"-summary",level:2}];function d(e){const n={blockquote:"blockquote",br:"br",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"performance-tuning-techniques-for-daily-company-work",children:"Performance Tuning Techniques for Daily Company Work"})}),"\n",(0,s.jsx)(n.h2,{id:"-story-time--why-is-my-etl-slower-than-yesterday",children:"\u2728 Story Time \u2014 \u201cWhy Is My ETL Slower Than Yesterday?\u201d"}),"\n",(0,s.jsx)(n.p,{children:"Meera is a data engineer at a fast-growing company."}),"\n",(0,s.jsxs)(n.p,{children:["Yesterday, her ETL job completed in ",(0,s.jsx)(n.strong,{children:"12 minutes"}),".",(0,s.jsx)(n.br,{}),"\n","Today, it takes ",(0,s.jsx)(n.strong,{children:"25 minutes"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Her first thought:"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u201cDid I change anything?\u201d"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Nothing changed in SQL. But the company added ",(0,s.jsx)(n.strong,{children:"more data"}),", more users ran queries, and the warehouse size wasn\u2019t optimized."]}),"\n",(0,s.jsxs)(n.p,{children:["Meera realized ",(0,s.jsx)(n.strong,{children:"Snowflake is fast, but only if you follow performance tuning best practices"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Here\u2019s what she learned."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-1\ufe0f\u20e3-optimize-warehouse-usage",children:"\ud83e\uddf1 1\ufe0f\u20e3 Optimize Warehouse Usage"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Right-size warehouses"}),": Small \u2192 Medium \u2192 Large based on query/data size"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enable Auto-Suspend (1\u20135 mins)"}),": Avoid paying for idle compute"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Auto-Resume"}),": Immediate execution without waiting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-cluster warehouses"}),": Only for high concurrency workloads"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Example: Daily ETL pipeline with 200M rows \u2192 Medium warehouse with auto-suspend/resume is cost-efficient."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2\ufe0f\u20e3-leverage-caching",children:"2\ufe0f\u20e3 Leverage Caching"}),"\n",(0,s.jsx)(n.p,{children:"Snowflake caches:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Result Cache"}),": Returns repeated query results instantly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Metadata Cache"}),": Reduces query compilation time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Warehouse Cache"}),": Speeds up repeated scans of large tables"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Tips:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Keep frequently queried tables on an ",(0,s.jsx)(n.strong,{children:"active warehouse"})," for repeated runs"]}),"\n",(0,s.jsx)(n.li,{children:"Avoid unnecessary warehouse resizing between queries"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3\ufe0f\u20e3-use-clustering-keys-smartly",children:"3\ufe0f\u20e3 Use Clustering Keys Smartly"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Clustering improves ",(0,s.jsx)(n.strong,{children:"micro-partition pruning"})," for large tables"]}),"\n",(0,s.jsx)(n.li,{children:"Helps queries filter efficiently"}),"\n",(0,s.jsx)(n.li,{children:"Avoid over-clustering \u2014 increases maintenance cost"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Example: CUSTOMER table partitioned by REGION \u2192 queries for a single region read fewer micro-partitions."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4\ufe0f\u20e3-query-optimization-techniques",children:"4\ufe0f\u20e3 Query Optimization Techniques"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select only needed columns"})," \u2192 reduces scan bytes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Filter early"})," \u2192 Snowflake pushes WHERE filters for pruning"]}),"\n",(0,s.jsx)(n.li,{children:"**Avoid SELECT *** for large tables"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use CTEs carefully"})," \u2192 materialize large intermediate results only when needed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use query profile"})," to find bottlenecks"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5\ufe0f\u20e3-optimize-joins",children:"5\ufe0f\u20e3 Optimize Joins"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Broadcast small tables"})," in joins"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Avoid cross joins"})," unless necessary"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Push filters before join"})," \u2192 reduces join size"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check query profile"})," \u2192 identify slow join nodes"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Real example: Joining 50GB SALES with 2MB CUSTOMER \u2192 broadcast join reduces runtime from 8 mins \u2192 20 secs."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6\ufe0f\u20e3-partitioning--micro-partition-awareness",children:"6\ufe0f\u20e3 Partitioning & Micro-Partition Awareness"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Snowflake automatically partitions data in ",(0,s.jsx)(n.strong,{children:"micro-partitions (50\u2013500MB)"})]}),"\n",(0,s.jsxs)(n.li,{children:["Design queries to ",(0,s.jsx)(n.strong,{children:"benefit from min/max values"})]}),"\n",(0,s.jsx)(n.li,{children:"Avoid full table scans for large tables when filters exist"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Tip: Use ",(0,s.jsx)(n.strong,{children:"date or ID filters"})," for high selectivity \u2192 fewer partitions scanned \u2192 faster queries."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"7\ufe0f\u20e3-monitor--tune-regularly",children:"7\ufe0f\u20e3 Monitor & Tune Regularly"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.strong,{children:"Query Profile"}),": Identify slow nodes, bottlenecks"]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.strong,{children:"warehouse utilization"}),": Avoid over/under-sized clusters"]}),"\n",(0,s.jsxs)(n.li,{children:["Analyze ",(0,s.jsx)(n.strong,{children:"bytes scanned"})," vs rows returned"]}),"\n",(0,s.jsx)(n.li,{children:"Keep ETL and BI dashboards aligned with warehouse performance"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-real-world-story--meera-fixes-slow-etl",children:"\ud83e\uddea Real-World Story \u2014 Meera Fixes Slow ETL"}),"\n",(0,s.jsx)(n.p,{children:"Problem:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ETL reads 200M rows \u2192 takes 25 mins"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Analysis:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Warehouse: Medium \u2192 OK"}),"\n",(0,s.jsx)(n.li,{children:"Query scanned 90% of table \u2192 filter not selective"}),"\n",(0,s.jsx)(n.li,{children:"Join with CUSTOMER table was cross join \u2192 broadcast join missing"}),"\n",(0,s.jsx)(n.li,{children:"Query did SELECT * \u2192 unnecessary columns"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Fix:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Filter pushed early"}),"\n",(0,s.jsx)(n.li,{children:"Broadcast join applied"}),"\n",(0,s.jsx)(n.li,{children:"Selected only necessary columns"}),"\n",(0,s.jsx)(n.li,{children:"Auto-suspend enabled"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Result: ",(0,s.jsx)(n.strong,{children:"Runtime reduced to 9 minutes"}),", cost-efficient and reliable."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-key-takeaways",children:"\ud83d\udca1 Key Takeaways"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Right-size warehouses \u2192 cost & speed balance"}),"\n",(0,s.jsx)(n.li,{children:"Leverage caching \u2192 repeated queries run faster"}),"\n",(0,s.jsx)(n.li,{children:"Apply clustering only when necessary"}),"\n",(0,s.jsx)(n.li,{children:"Optimize queries \u2192 select needed columns, filter early"}),"\n",(0,s.jsx)(n.li,{children:"Monitor Query Profile & adjust joins"}),"\n",(0,s.jsx)(n.li,{children:"Be aware of micro-partitions \u2192 benefit pruning"}),"\n",(0,s.jsx)(n.li,{children:"Review performance regularly"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Performance tuning isn\u2019t one-time \u2014 it\u2019s ",(0,s.jsx)(n.strong,{children:"an ongoing practice"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-summary",children:"\ud83d\udcd8 Summary"}),"\n",(0,s.jsx)(n.p,{children:"Snowflake performance tuning for daily company work involves:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Warehouse sizing & auto-suspend/resume"}),"\n",(0,s.jsx)(n.li,{children:"Smart caching usage"}),"\n",(0,s.jsx)(n.li,{children:"Efficient clustering & pruning"}),"\n",(0,s.jsx)(n.li,{children:"Query optimization & filtering"}),"\n",(0,s.jsx)(n.li,{children:"Join strategy tuning"}),"\n",(0,s.jsx)(n.li,{children:"Micro-partition awareness"}),"\n",(0,s.jsx)(n.li,{children:"Continuous monitoring & adjustment"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["By combining these techniques, data engineers like Meera can ",(0,s.jsx)(n.strong,{children:"keep ETL, dashboards, and queries fast, reliable, and cost-effective"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"-next-topic",children:"\ud83d\udc49 Next Topic"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Handling Semi-Structured Data (JSON, XML, Avro)"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(6540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);