"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[8851],{8453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>a});var n=r(6540);const t={},c=n.createContext(t);function i(e){const s=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(c.Provider,{value:s},e.children)}},9179:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"secret-scopes-secure-credential-management","title":"Secret Scopes \u2014 Secure Credential Management","description":"Learn how to use Databricks Secret Scopes for securely managing credentials, API keys, and other sensitive information in your Databricks environment.","source":"@site/docs-databricks/secret-scopes-secure-credential-management.md","sourceDirName":".","slug":"/secret-scopes-secure-credential-management","permalink":"/databricks/secret-scopes-secure-credential-management","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"secret-scopes-secure-credential-management","title":"Secret Scopes \u2014 Secure Credential Management","sidebar_label":"Secret Scopes","description":"Learn how to use Databricks Secret Scopes for securely managing credentials, API keys, and other sensitive information in your Databricks environment.","keywords":["Databricks Secret Scopes","Secure Credential Management","API Keys","Sensitive Data","Databricks Security","Secrets Management"]},"sidebar":"tutorialSidebar2","previous":{"title":"Governance \u2014 Tags & Policies","permalink":"/databricks/databricks-governance-tags-classifications-policies"},"next":{"title":"Service Principals","permalink":"/databricks/service-principals-machine-identity-for-automation"}}');var t=r(4848),c=r(8453);const i={id:"secret-scopes-secure-credential-management",title:"Secret Scopes \u2014 Secure Credential Management",sidebar_label:"Secret Scopes",description:"Learn how to use Databricks Secret Scopes for securely managing credentials, API keys, and other sensitive information in your Databricks environment.",keywords:["Databricks Secret Scopes","Secure Credential Management","API Keys","Sensitive Data","Databricks Security","Secrets Management"]},a="Secret Scopes \u2014 Secure Credential Management",o={},l=[{value:"\ud83d\udd10 Why Secure Credential Management Matters",id:"-why-secure-credential-management-matters",level:2},{value:"\ud83e\uddd1\u200d\ud83d\udcbb What Are Secret Scopes?",id:"-what-are-secret-scopes",level:2},{value:"Key Features of Secret Scopes:",id:"key-features-of-secret-scopes",level:3},{value:"\ud83d\udee0 How to Create and Use Secret Scopes",id:"-how-to-create-and-use-secret-scopes",level:2},{value:"1. <strong>Creating a Secret Scope</strong>",id:"1-creating-a-secret-scope",level:3},{value:"2. <strong>Storing Secrets in the Secret Scope</strong>",id:"2-storing-secrets-in-the-secret-scope",level:3},{value:"3. <strong>Accessing Secrets in Notebooks or Jobs</strong>",id:"3-accessing-secrets-in-notebooks-or-jobs",level:3},{value:"4. <strong>Accessing Secrets in Clusters</strong>",id:"4-accessing-secrets-in-clusters",level:3},{value:"\ud83d\ude80 Benefits of Using Secret Scopes",id:"-benefits-of-using-secret-scopes",level:2},{value:"1. <strong>Enhanced Security</strong>",id:"1-enhanced-security",level:3},{value:"2. <strong>Centralized Secret Management</strong>",id:"2-centralized-secret-management",level:3},{value:"3. <strong>Granular Access Control</strong>",id:"3-granular-access-control",level:3},{value:"4. <strong>Simplified Secret Access</strong>",id:"4-simplified-secret-access",level:3},{value:"\ud83e\udde0 When to Use Secret Scopes",id:"-when-to-use-secret-scopes",level:2},{value:"\ud83d\udcca Secret Scopes Architecture Overview",id:"-secret-scopes-architecture-overview",level:2},{value:"\ud83d\udcd8 Summary",id:"-summary",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"secret-scopes--secure-credential-management",children:"Secret Scopes \u2014 Secure Credential Management"})}),"\n",(0,t.jsx)(s.h2,{id:"-why-secure-credential-management-matters",children:"\ud83d\udd10 Why Secure Credential Management Matters"}),"\n",(0,t.jsxs)(s.p,{children:["In a modern data pipeline, sensitive information such as ",(0,t.jsx)(s.strong,{children:"API keys"}),", ",(0,t.jsx)(s.strong,{children:"database credentials"}),", and ",(0,t.jsx)(s.strong,{children:"access tokens"})," is often required to access various services and data sources. But storing these secrets in plain text, hardcoding them in your code, or storing them in a less secure location creates significant security risks."]}),"\n",(0,t.jsxs)(s.p,{children:["Databricks offers ",(0,t.jsx)(s.strong,{children:"Secret Scopes"})," to securely manage and access secrets within your Databricks workspace. Secret Scopes help you keep sensitive credentials safe, while also simplifying access to them for your notebooks, jobs, and clusters."]}),"\n",(0,t.jsxs)(s.p,{children:["In this article, we\u2019ll explore how ",(0,t.jsx)(s.strong,{children:"Databricks Secret Scopes"})," work and how you can use them to manage your credentials securely and efficiently."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-what-are-secret-scopes",children:"\ud83e\uddd1\u200d\ud83d\udcbb What Are Secret Scopes?"}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"Secret Scope"})," in Databricks is a container for storing secrets, such as passwords, API keys, or any other sensitive information that your Databricks workspace needs to access. Secrets are stored securely and can only be accessed by users or services with the appropriate permissions."]}),"\n",(0,t.jsx)(s.h3,{id:"key-features-of-secret-scopes",children:"Key Features of Secret Scopes:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Secure Storage"}),": Secrets are encrypted and stored securely in Databricks, ensuring that sensitive information is protected."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Granular Access Control"}),": You can control who has access to specific secrets using permissions and roles."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Integration with Databricks"}),": Secrets stored in Secret Scopes can be easily accessed in Databricks notebooks, jobs, and clusters via environment variables or APIs."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-how-to-create-and-use-secret-scopes",children:"\ud83d\udee0 How to Create and Use Secret Scopes"}),"\n",(0,t.jsxs)(s.h3,{id:"1-creating-a-secret-scope",children:["1. ",(0,t.jsx)(s.strong,{children:"Creating a Secret Scope"})]}),"\n",(0,t.jsx)(s.p,{children:"Creating a Secret Scope is simple, and you can do it via the Databricks CLI, REST API, or the Databricks UI. Here\u2019s an example of how to create a secret scope via the Databricks CLI:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"databricks secrets create-scope --scope my_secret_scope\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This command will create a new secret scope called ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"my_secret_scope"})}),". You can now store secrets within this scope."]}),"\n",(0,t.jsxs)(s.h3,{id:"2-storing-secrets-in-the-secret-scope",children:["2. ",(0,t.jsx)(s.strong,{children:"Storing Secrets in the Secret Scope"})]}),"\n",(0,t.jsx)(s.p,{children:"Once your secret scope is created, you can store secrets in it. Here\u2019s an example of how to add a secret:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"databricks secrets put --scope my_secret_scope --key my_api_key\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This command will store the value for ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"my_api_key"})})," in the ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"my_secret_scope"})}),"."]}),"\n",(0,t.jsxs)(s.h3,{id:"3-accessing-secrets-in-notebooks-or-jobs",children:["3. ",(0,t.jsx)(s.strong,{children:"Accessing Secrets in Notebooks or Jobs"})]}),"\n",(0,t.jsx)(s.p,{children:"Once your secrets are securely stored, you can access them in your Databricks notebooks or jobs using the Databricks Secrets API or environment variables. Here\u2019s how you access a secret in a notebook:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# Accessing a secret in a Databricks notebook\r\nimport os\r\nmy_api_key = dbutils.secrets.get(scope="my_secret_scope", key="my_api_key")\r\n\r\n# Use the secret\r\nprint(f"My API Key: {my_api_key}")\n'})}),"\n",(0,t.jsxs)(s.p,{children:["This will retrieve the ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"my_api_key"})})," secret stored in the ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"my_secret_scope"})})," and make it available in your notebook."]}),"\n",(0,t.jsxs)(s.h3,{id:"4-accessing-secrets-in-clusters",children:["4. ",(0,t.jsx)(s.strong,{children:"Accessing Secrets in Clusters"})]}),"\n",(0,t.jsxs)(s.p,{children:["You can also configure your ",(0,t.jsx)(s.strong,{children:"Databricks clusters"})," to automatically use secrets as environment variables. This is particularly useful for jobs and cluster configurations that require credentials."]}),"\n",(0,t.jsx)(s.p,{children:"To set secrets as environment variables in a cluster configuration:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Go to the ",(0,t.jsx)(s.strong,{children:"Clusters"})," tab in Databricks."]}),"\n",(0,t.jsxs)(s.li,{children:["Select a cluster and click ",(0,t.jsx)(s.strong,{children:"Edit"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Under the ",(0,t.jsx)(s.strong,{children:"Advanced Options"})," section, go to ",(0,t.jsx)(s.strong,{children:"Environment Variables"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"Set the environment variable like this:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"MY_API_KEY = {{secrets/my_secret_scope/my_api_key}}\n"})}),"\n",(0,t.jsx)(s.p,{children:"When your cluster starts, it will automatically load the secret as an environment variable."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-benefits-of-using-secret-scopes",children:"\ud83d\ude80 Benefits of Using Secret Scopes"}),"\n",(0,t.jsxs)(s.h3,{id:"1-enhanced-security",children:["1. ",(0,t.jsx)(s.strong,{children:"Enhanced Security"})]}),"\n",(0,t.jsxs)(s.p,{children:["Storing sensitive information such as API keys, passwords, and tokens in plaintext or hardcoding them into code is a significant security risk. ",(0,t.jsx)(s.strong,{children:"Databricks Secret Scopes"})," ensure that secrets are encrypted and stored securely, preventing unauthorized access."]}),"\n",(0,t.jsxs)(s.h3,{id:"2-centralized-secret-management",children:["2. ",(0,t.jsx)(s.strong,{children:"Centralized Secret Management"})]}),"\n",(0,t.jsx)(s.p,{children:"With Secret Scopes, all your secrets are stored in a central, secure location, making it easier to manage and audit them. You can rotate secrets, revoke access, and track usage across all Databricks workspaces."}),"\n",(0,t.jsxs)(s.h3,{id:"3-granular-access-control",children:["3. ",(0,t.jsx)(s.strong,{children:"Granular Access Control"})]}),"\n",(0,t.jsx)(s.p,{children:"Secret Scopes allow you to control who can access secrets. You can define permissions for users, groups, or services, ensuring that only authorized entities can access sensitive data."}),"\n",(0,t.jsxs)(s.h3,{id:"4-simplified-secret-access",children:["4. ",(0,t.jsx)(s.strong,{children:"Simplified Secret Access"})]}),"\n",(0,t.jsx)(s.p,{children:"Databricks makes it easy to access secrets in your notebooks, jobs, and clusters. With simple APIs and environment variables, you can seamlessly integrate secrets into your workflows without compromising security."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-when-to-use-secret-scopes",children:"\ud83e\udde0 When to Use Secret Scopes"}),"\n",(0,t.jsx)(s.p,{children:"Use Secret Scopes if:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["You need to ",(0,t.jsx)(s.strong,{children:"securely store"})," and ",(0,t.jsx)(s.strong,{children:"manage credentials"})," such as API keys, database credentials, and access tokens."]}),"\n",(0,t.jsxs)(s.li,{children:["You want to ",(0,t.jsx)(s.strong,{children:"integrate secrets"})," into Databricks notebooks, jobs, and clusters without hardcoding them into your code."]}),"\n",(0,t.jsxs)(s.li,{children:["You need to ",(0,t.jsx)(s.strong,{children:"enforce granular access control"})," for different users and services."]}),"\n",(0,t.jsxs)(s.li,{children:["You need to ensure compliance with ",(0,t.jsx)(s.strong,{children:"data security standards"})," like ",(0,t.jsx)(s.strong,{children:"GDPR"}),", ",(0,t.jsx)(s.strong,{children:"HIPAA"}),", or ",(0,t.jsx)(s.strong,{children:"SOC 2"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Avoid Secret Scopes if:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["You don\u2019t deal with ",(0,t.jsx)(s.strong,{children:"sensitive data"})," that requires encryption or access controls."]}),"\n",(0,t.jsxs)(s.li,{children:["You have a ",(0,t.jsx)(s.strong,{children:"small, isolated project"})," where credential management isn\u2019t a concern."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-secret-scopes-architecture-overview",children:"\ud83d\udcca Secret Scopes Architecture Overview"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"Databricks Workspace\r\n       \u2193 Secret Scope\r\n   (Encrypted Secrets)\r\n       \u2193 Access via Notebooks/Jobs/Clusters\r\n       \u2193 Secure Data Access\n"})}),"\n",(0,t.jsxs)(s.p,{children:["In this architecture, ",(0,t.jsx)(s.strong,{children:"Secret Scopes"})," serve as a secure container for sensitive information that is encrypted and only accessible by authorized users and services. You can access secrets directly in notebooks, jobs, and clusters, streamlining your workflow without compromising security."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"-summary",children:"\ud83d\udcd8 Summary"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Databricks Secret Scopes"})," provide a robust and secure way to manage sensitive data, such as API keys, passwords, and access tokens. By using Secret Scopes, you can ensure that credentials are stored securely and are only accessible to authorized users and services. This approach not only enhances data security but also simplifies credential management across your Databricks environment."]}),"\n",(0,t.jsxs)(s.p,{children:["With ",(0,t.jsx)(s.strong,{children:"granular access controls"}),", ",(0,t.jsx)(s.strong,{children:"encryption"}),", and ",(0,t.jsx)(s.strong,{children:"seamless integration"})," into notebooks, jobs, and clusters, Secret Scopes help you manage credentials efficiently while maintaining a high level of security and compliance."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h1,{id:"-next-topic",children:"\ud83d\udc49 Next Topic"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Service Principals \u2014 Machine Identity for Automation"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{})})]})}function h(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);