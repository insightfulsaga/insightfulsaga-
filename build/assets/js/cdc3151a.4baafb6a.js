"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[1144],{8034:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"snowflake-streams","title":"Streams \u2014 Change Data Capture at Table Level","description":"Learn how Snowflake Streams enable Change Data Capture (CDC) at the table level, track inserts, updates, and deletes, and integrate with pipelines efficiently in a story-driven format.","source":"@site/docs-snowflake/snowflake-streams.md","sourceDirName":".","slug":"/snowflake-streams","permalink":"/snowflake/snowflake-streams","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"snowflake-streams","title":"Streams \u2014 Change Data Capture at Table Level","sidebar_label":"Streams","description":"Learn how Snowflake Streams enable Change Data Capture (CDC) at the table level, track inserts, updates, and deletes, and integrate with pipelines efficiently in a story-driven format.","keywords":["Snowflake Streams","change data capture Snowflake","CDC Snowflake","Snowflake incremental data","Snowflake table streams"]},"sidebar":"tutorialSidebar1","previous":{"title":"Zero-Copy Cloning","permalink":"/snowflake/snowflake-zero-copy-cloning"},"next":{"title":"Tasks","permalink":"/snowflake/snowflake-tasks"}}');var t=s(4848),a=s(8453);const l={id:"snowflake-streams",title:"Streams \u2014 Change Data Capture at Table Level",sidebar_label:"Streams",description:"Learn how Snowflake Streams enable Change Data Capture (CDC) at the table level, track inserts, updates, and deletes, and integrate with pipelines efficiently in a story-driven format.",keywords:["Snowflake Streams","change data capture Snowflake","CDC Snowflake","Snowflake incremental data","Snowflake table streams"]},i="Streams \u2014 Change Data Capture at Table Level",o={},d=[{value:"\u2728 Story Time \u2014 \u201cHow Do I Track Changes Without Breaking Everything?\u201d",id:"-story-time--how-do-i-track-changes-without-breaking-everything",level:2},{value:"\ud83e\udde9 What is a Snowflake Stream?",id:"-what-is-a-snowflake-stream",level:2},{value:"\ud83d\udd0d How Streams Work",id:"-how-streams-work",level:2},{value:"\ud83c\udfaf Types of Streams",id:"-types-of-streams",level:2},{value:"\ud83e\uddea Real-World Use Case",id:"-real-world-use-case",level:2},{value:"\u26a1 Benefits of Streams",id:"-benefits-of-streams",level:2},{value:"\ud83e\udde0 Best Practices",id:"-best-practices",level:2},{value:"\ud83d\udcd8 Summary",id:"-summary",level:2}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"streams--change-data-capture-at-table-level",children:"Streams \u2014 Change Data Capture at Table Level"})}),"\n",(0,t.jsx)(n.h2,{id:"-story-time--how-do-i-track-changes-without-breaking-everything",children:"\u2728 Story Time \u2014 \u201cHow Do I Track Changes Without Breaking Everything?\u201d"}),"\n",(0,t.jsxs)(n.p,{children:["Meet Leo, a data engineer.",(0,t.jsx)(n.br,{}),"\n","His company wants to ",(0,t.jsx)(n.strong,{children:"process only new or updated orders"})," from their massive ",(0,t.jsx)(n.code,{children:"orders"})," table every day."]}),"\n",(0,t.jsx)(n.p,{children:"Without Streams, Leo has two painful options:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Full table scan"}),": Scan billions of rows every time \u2014 slow and expensive."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Manual tracking"}),": Add \u201clast updated\u201d columns and logic \u2014 prone to errors."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Snowflake provides a ",(0,t.jsx)(n.strong,{children:"magical feature called Streams"})," that solves this elegantly."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-what-is-a-snowflake-stream",children:"\ud83e\udde9 What is a Snowflake Stream?"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"Stream"})," is like a ",(0,t.jsx)(n.strong,{children:"watcher"})," on a table."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Tracks ",(0,t.jsx)(n.strong,{children:"INSERT, UPDATE, DELETE"})," operations"]}),"\n",(0,t.jsx)(n.li,{children:"Records changes since the last time the stream was consumed"}),"\n",(0,t.jsxs)(n.li,{children:["Supports ",(0,t.jsx)(n.strong,{children:"incremental processing"})," without scanning the full table"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key benefit:"})," You get ",(0,t.jsx)(n.strong,{children:"only the new or changed data"})," automatically."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-how-streams-work",children:"\ud83d\udd0d How Streams Work"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a Stream on a table:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE OR REPLACE STREAM orders_stream \r\nON TABLE orders\r\nSHOW_INITIAL_ROWS = TRUE;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Query the Stream:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM orders_stream;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Snowflake returns:"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Newly inserted rows"}),"\n",(0,t.jsxs)(n.li,{children:["Updated rows with ",(0,t.jsx)(n.strong,{children:"before/after"})," images"]}),"\n",(0,t.jsxs)(n.li,{children:["Deleted rows with ",(0,t.jsx)(n.strong,{children:"metadata"})]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Consume the Stream in a pipeline:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSERT INTO orders_delta\r\nSELECT * FROM orders_stream;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After consumption, the Stream automatically ",(0,t.jsx)(n.strong,{children:"tracks only new changes"})," next time."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-types-of-streams",children:"\ud83c\udfaf Types of Streams"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Stream Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Standard Stream"}),(0,t.jsx)(n.td,{children:"Tracks changes (insert, update, delete) on a table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Append-Only Stream"}),(0,t.jsx)(n.td,{children:"Tracks only new rows inserted"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Table Stream vs View Stream"}),(0,t.jsx)(n.td,{children:"Table streams are tied to a table; view streams track changes from the underlying view"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-real-world-use-case",children:"\ud83e\uddea Real-World Use Case"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Marketing analytics wants to process only new orders for dashboards:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create Stream on ",(0,t.jsx)(n.code,{children:"orders"})," table"]}),"\n",(0,t.jsxs)(n.li,{children:["Pipeline reads ",(0,t.jsx)(n.code,{children:"orders_stream"})," every hour"]}),"\n",(0,t.jsx)(n.li,{children:"Only new/changed orders are inserted into reporting table"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Result:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Avoids scanning billions of rows"}),"\n",(0,t.jsx)(n.li,{children:"Reduces warehouse costs"}),"\n",(0,t.jsx)(n.li,{children:"Ensures real-time or near-real-time analytics"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-benefits-of-streams",children:"\u26a1 Benefits of Streams"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Incremental processing"}),": Only process changed data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pipeline efficiency"}),": Avoid full table scans"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simplifies CDC"}),": Built-in Snowflake feature, no manual tracking"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Works with Tasks"}),": Automate consumption in scheduled jobs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Supports recovery"}),": Works with Time Travel to recover missed changes"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-best-practices",children:"\ud83e\udde0 Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Always ",(0,t.jsx)(n.strong,{children:"consume Streams regularly"})," to avoid excessive metadata"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"Tasks"})," to automate Stream processing"]}),"\n",(0,t.jsxs)(n.li,{children:["Combine Streams with ",(0,t.jsx)(n.strong,{children:"Zero-Copy Cloning"})," for safe testing"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"Append-Only Streams"})," for logs or event tables"]}),"\n",(0,t.jsxs)(n.li,{children:["Monitor ",(0,t.jsx)(n.strong,{children:"lag"})," in Stream consumption for large tables"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-summary",children:"\ud83d\udcd8 Summary"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Streams"})," are Snowflake\u2019s built-in solution for ",(0,t.jsx)(n.strong,{children:"Change Data Capture"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["They track ",(0,t.jsx)(n.strong,{children:"inserts, updates, and deletes"})," at the table level."]}),"\n",(0,t.jsxs)(n.li,{children:["Streams enable ",(0,t.jsx)(n.strong,{children:"incremental ETL pipelines"}),", reducing cost and improving performance."]}),"\n",(0,t.jsxs)(n.li,{children:["They integrate perfectly with ",(0,t.jsx)(n.strong,{children:"Tasks, Time Travel, and Zero-Copy Cloning"})," for safe and automated workflows."]}),"\n",(0,t.jsxs)(n.li,{children:["Ideal for analytics, reporting, and any scenario where only ",(0,t.jsx)(n.strong,{children:"new or changed data matters"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"-next-topic",children:"\ud83d\udc49 Next Topic"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tasks \u2014 How Scheduling Works Internally"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var r=s(6540);const t={},a=r.createContext(t);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);