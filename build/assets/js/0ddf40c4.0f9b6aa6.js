"use strict";(self.webpackChunkdatacraft_school=self.webpackChunkdatacraft_school||[]).push([[1416],{4324:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"performance-optimization1","title":"Performance & Optimization (Speed + Cost) - part 2","description":"3. Data Skipping","source":"@site/docs-databricks/performance-optimization1.md","sourceDirName":".","slug":"/performance-optimization1","permalink":"/databricks/performance-optimization1","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"performance-optimization1","title":"Performance & Optimization (Speed + Cost) - part 2","sidebar_label":"Performance & Optimization - part 2"}}');var t=s(4848),i=s(8453);const l={id:"performance-optimization1",title:"Performance & Optimization (Speed + Cost) - part 2",sidebar_label:"Performance & Optimization - part 2"},d=void 0,o={},a=[{value:"3. Data Skipping",id:"3-data-skipping",level:2},{value:"\u2705 How It Works (Behind the Scenes)",id:"-how-it-works-behind-the-scenes",level:3},{value:"Why OPTIMIZE Helps",id:"why-optimize-helps",level:3},{value:"4. Auto Optimize &amp; Auto Compaction",id:"4-auto-optimize--auto-compaction",level:2},{value:"\ud83d\udee0\ufe0f When to Use",id:"\ufe0f-when-to-use",level:3},{value:"\ud83d\udd0d Tuning Notes",id:"-tuning-notes",level:3},{value:"\ud83d\ude98 5. Cluster Sizing &amp; Photon",id:"-5-cluster-sizing--photon",level:2},{value:"Top Engineer Insight:",id:"top-engineer-insight",level:3},{value:"Photon",id:"photon",level:3},{value:"\ud83d\udd25 Photon Benefits",id:"-photon-benefits",level:3},{value:"\ud83d\udee0\ufe0f How to Enable Photon",id:"\ufe0f-how-to-enable-photon",level:3},{value:"\ud83d\udcca Real Example: Before vs After Photon",id:"-real-example-before-vs-after-photon",level:3},{value:"6. File Format Optimization",id:"6-file-format-optimization",level:2},{value:"\ud83d\udca1 What This Means for Data Files",id:"-what-this-means-for-data-files",level:3},{value:"\ud83d\ude80 Best Practice",id:"-best-practice",level:3},{value:"\ud83d\udd11 1-Minute Summary: performance-optimization",id:"-1-minute-summary-performance-optimization",level:2}];function c(e){const n={br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"3-data-skipping",children:"3. Data Skipping"}),"\n",(0,t.jsx)(n.p,{children:"Data Skipping means Spark automatically avoids scanning files that don\u2019t contain relevant data \u2014 by checking column stats (min/max) stored in each file."}),"\n",(0,t.jsxs)(n.p,{children:["Instead of blindly scanning everything, it asks:",(0,t.jsx)(n.br,{}),"\n","\u201cWhich files even could contain the data I need?\u201d"]}),"\n",(0,t.jsx)(n.p,{children:"It\u2019s a built-in feature in Delta Lake \u2014 you don\u2019t have to enable it manually."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\ud83e\udde0 Real-World Analogy"}),(0,t.jsx)(n.br,{}),"\n","Imagine you\u2019re looking for a book published in 2025:"]}),"\n",(0,t.jsxs)(n.p,{children:["Library has 10 shelves, each labeled with a year range:",(0,t.jsx)(n.br,{}),"\n","Shelf 1: 2020\u20132021",(0,t.jsx)(n.br,{}),"\n","Shelf 2: 2022\u20132023",(0,t.jsx)(n.br,{}),"\n","Shelf 3: 2025\u20132026 \u2705"]}),"\n",(0,t.jsxs)(n.p,{children:["You check the labels and go only to Shelf 3.",(0,t.jsx)(n.br,{}),"\n","That\u2019s data skipping."]}),"\n",(0,t.jsx)(n.h3,{id:"-how-it-works-behind-the-scenes",children:"\u2705 How It Works (Behind the Scenes)"}),"\n",(0,t.jsx)(n.p,{children:"Delta stores metadata like:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"File Name"}),(0,t.jsxs)(n.th,{children:["Min ",(0,t.jsx)(n.code,{children:"order_date"})]}),(0,t.jsxs)(n.th,{children:["Max ",(0,t.jsx)(n.code,{children:"order_date"})]})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File_1"}),(0,t.jsx)(n.td,{children:"2025-08-01"}),(0,t.jsx)(n.td,{children:"2025-08-02"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File_2"}),(0,t.jsx)(n.td,{children:"2025-08-03"}),(0,t.jsx)(n.td,{children:"2025-08-04"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File_3"}),(0,t.jsx)(n.td,{children:"2025-08-05"}),(0,t.jsx)(n.td,{children:"2025-08-06"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Now, if you run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM sales  \r\nWHERE order_date = '2025-08-05';\n"})}),"\n",(0,t.jsx)(n.p,{children:"\ud83d\udc49 Spark checks file stats first and sees:"}),"\n",(0,t.jsxs)(n.p,{children:["Only File_3 can contain that date.",(0,t.jsx)(n.br,{}),"\n","So it skips all other files."]}),"\n",(0,t.jsx)(n.p,{children:"Result: \ud83d\ude80 Faster query with less I/O."}),"\n",(0,t.jsx)(n.h3,{id:"why-optimize-helps",children:"Why OPTIMIZE Helps"}),"\n",(0,t.jsx)(n.p,{children:"If your data has lots of small files, each one has only a few rows \u2192 min/max stats are not very meaningful.\r\nAlso, many small files = more overhead."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 OPTIMIZE solves this:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"OPTIMIZE gold.sales;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["-Combines small files into larger ones",(0,t.jsx)(n.br,{}),"\n","-Each large file now has better, broader stats",(0,t.jsx)(n.br,{}),"\n","-So data skipping becomes much more effective"]}),"\n",(0,t.jsx)(n.h2,{id:"4-auto-optimize--auto-compaction",children:"4. Auto Optimize & Auto Compaction"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"The Problem:"})}),"\n",(0,t.jsx)(n.p,{children:"When writing data in small batches (e.g., streaming, micro-batch, CDC), Delta tables end up with many tiny files."}),"\n",(0,t.jsx)(n.p,{children:'This is called the "small file problem"'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 The Solution: Auto Optimize + Auto Compaction"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"What it Does"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Auto Optimize (Optimize Write)"})}),(0,t.jsxs)(n.td,{children:["Writes ",(0,t.jsx)(n.strong,{children:"larger, more efficient files"})," right from the start"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Auto Compaction"})}),(0,t.jsxs)(n.td,{children:["Periodically ",(0,t.jsx)(n.strong,{children:"merges small files"})," in the background into larger ones"]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Together, they keep your Delta tables clean and performant \u2014 without needing manual OPTIMIZE jobs."}),"\n",(0,t.jsx)(n.p,{children:"\ud83e\uddea Example SQL to Enable:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"ALTER TABLE silver.sales\r\nSET TBLPROPERTIES (\r\n  delta.autoOptimize.optimizeWrite = true,\r\n  delta.autoOptimize.autoCompact = true\r\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\ufe0f-when-to-use",children:"\ud83d\udee0\ufe0f When to Use"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"\u2705 Use It"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Streaming ingestion"})}),(0,t.jsx)(n.td,{children:"YES \u2014 perfect fit"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Incremental loads"})}),(0,t.jsx)(n.td,{children:"YES \u2014 prevents file bloat"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Heavy ETL pipelines"})}),(0,t.jsx)(n.td,{children:"YES \u2014 keeps tables performant"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Static full refresh datasets"})}),(0,t.jsxs)(n.td,{children:["\u274c Not needed \u2014 just use ",(0,t.jsx)(n.code,{children:"OPTIMIZE"})," once after load"]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"-tuning-notes",children:"\ud83d\udd0d Tuning Notes"}),"\n",(0,t.jsxs)(n.p,{children:["-Doesn\u2019t fully replace OPTIMIZE for big performance tuning, but reduces the need for frequent runs",(0,t.jsx)(n.br,{}),"\n","-Works best in high-frequency write environments (like real-time or hourly data)",(0,t.jsx)(n.br,{}),"\n","-Auto Compaction is asynchronous and runs behind the scenes"]}),"\n",(0,t.jsx)(n.h2,{id:"-5-cluster-sizing--photon",children:"\ud83d\ude98 5. Cluster Sizing & Photon"}),"\n",(0,t.jsx)(n.p,{children:"Databricks runs your jobs on clusters (groups of machines or VMs)."}),"\n",(0,t.jsx)(n.p,{children:"The cluster size determines:"}),"\n",(0,t.jsxs)(n.p,{children:["-How fast your job runs",(0,t.jsx)(n.br,{}),"\n","-How much you pay"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cluster Size"}),(0,t.jsx)(n.th,{children:"When to Use"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\ud83e\uddea ",(0,t.jsx)(n.strong,{children:"Small jobs"})]}),(0,t.jsx)(n.td,{children:"Light ETL, dev testing \u2192 2\u20134 nodes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\ud83e\uddf1 ",(0,t.jsx)(n.strong,{children:"Heavy batch jobs"})]}),(0,t.jsx)(n.td,{children:"Aggregations, joins, transformations \u2192 8\u201316 nodes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\ud83d\udcca ",(0,t.jsx)(n.strong,{children:"BI dashboards / SQL"})]}),(0,t.jsxs)(n.td,{children:["Use ",(0,t.jsx)(n.strong,{children:"auto-scaling"})," clusters with Photon"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\u2699\ufe0f ",(0,t.jsx)(n.strong,{children:"Experiments / retry logic"})]}),(0,t.jsxs)(n.td,{children:["Use ",(0,t.jsx)(n.strong,{children:"spot instances"})," for cost savings"]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2757 Problem:"})}),"\n",(0,t.jsxs)(n.p,{children:["Too small \u2192 Jobs spill to disk, slow performance",(0,t.jsx)(n.br,{}),"\n","Too big \u2192 Wastes money, underutilized resources"]}),"\n",(0,t.jsx)(n.h3,{id:"top-engineer-insight",children:"Top Engineer Insight:"}),"\n",(0,t.jsxs)(n.p,{children:["Monitor these to right-size:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Shuffle spill:"})," Memory not enough for joins/sorts? Increase RAM.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Executor memory/CPU:"})," Constantly maxed? Need bigger nodes.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Skewed tasks:"})," One task runs longer than others? Time to tune data layout."]}),"\n",(0,t.jsx)(n.p,{children:"Enter Photon: The Jetpack Engine"}),"\n",(0,t.jsx)(n.h3,{id:"photon",children:"Photon"}),"\n",(0,t.jsx)(n.p,{children:"Photon is a new execution engine built in C++ (instead of Java/Scala like traditional Spark)."}),"\n",(0,t.jsx)(n.p,{children:"\u2705 Automatically speeds up:"}),"\n",(0,t.jsxs)(n.p,{children:["-SQL queries",(0,t.jsx)(n.br,{}),"\n","-Delta Lake operations",(0,t.jsx)(n.br,{}),"\n","-BI dashboards (Databricks SQL)"]}),"\n",(0,t.jsx)(n.h3,{id:"-photon-benefits",children:"\ud83d\udd25 Photon Benefits"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"2\u20133x faster queries"}),"\n",(0,t.jsx)(n.li,{children:"Lower compute cost"}),"\n",(0,t.jsx)(n.li,{children:"Works with Delta Lake + Spark SQL"}),"\n",(0,t.jsx)(n.li,{children:"Easy to enable \u2014 just check a box"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\ufe0f-how-to-enable-photon",children:"\ud83d\udee0\ufe0f How to Enable Photon"}),"\n",(0,t.jsx)(n.p,{children:"Via UI:"}),"\n",(0,t.jsx)(n.p,{children:'When creating a cluster, just check "Enable Photon"'}),"\n",(0,t.jsx)(n.p,{children:"Via JSON config:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\r\n  "cluster_name": "photon-cluster",\r\n  "spark_version": "13.3.x-scala2.12-photon",\r\n  "node_type_id": "i3.xlarge",\r\n  "num_workers": 4\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"-real-example-before-vs-after-photon",children:"\ud83d\udcca Real Example: Before vs After Photon"}),"\n",(0,t.jsx)(n.p,{children:"A retail company runs daily sales reports."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-test",children:"| Metric       | Before Photon           | After Photon |\r\n| ------------ | ----------------------- | ------------ |\r\n| Cluster Size | 10 nodes                | 6 nodes      |\r\n| Query Time   | 45 minutes              | 15 minutes   |\r\n| Result       | \u2705 3x faster, \ud83d\udcb0 cheaper |              |\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u201cThe best engineers don\u2019t just use big clusters \u2014 they use the right clusters, with Photon, at the right time.\u201d"})}),"\n",(0,t.jsx)(n.h2,{id:"6-file-format-optimization",children:"6. File Format Optimization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"The Story: Grocery Store Files"})}),"\n",(0,t.jsx)(n.p,{children:"Imagine you run a grocery store, and every day you get invoices from different suppliers:"}),"\n",(0,t.jsxs)(n.p,{children:["Supplier A sends handwritten notes (slow to read).",(0,t.jsx)(n.br,{}),"\n","Supplier B sends Excel files (a bit faster).",(0,t.jsx)(n.br,{}),"\n","Supplier C sends organized PDFs (okay speed).",(0,t.jsx)(n.br,{}),"\n","Supplier D sends barcode-scanned digital lists (super fast!)."]}),"\n",(0,t.jsx)(n.p,{children:"If you want to quickly find the price of milk, which supplier\u2019s file would you prefer?"}),"\n",(0,t.jsx)(n.p,{children:"Clearly, the barcode-scanned list wins!"}),"\n",(0,t.jsx)(n.h3,{id:"-what-this-means-for-data-files",children:"\ud83d\udca1 What This Means for Data Files"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Format"}),(0,t.jsx)(n.th,{children:"Like\u2026"}),(0,t.jsx)(n.th,{children:"Speed & Efficiency"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CSV"}),(0,t.jsx)(n.td,{children:"Handwritten notes"}),(0,t.jsx)(n.td,{children:"Slow, bulky, no compression"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"JSON"}),(0,t.jsx)(n.td,{children:"Semi-structured Excel"}),(0,t.jsx)(n.td,{children:"Flexible, but heavy"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Parquet"}),(0,t.jsx)(n.td,{children:"Barcode format"}),(0,t.jsx)(n.td,{children:"Columnar, compressed, fast"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Delta"}),(0,t.jsx)(n.td,{children:"Barcode + history + security"}),(0,t.jsx)(n.td,{children:"Best performance & reliability"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Professional"}),(0,t.jsx)(n.br,{}),"\n","Choose the right format to speed up your data journey."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CSV & JSON"})," are easy but slow and large\u2014bad for big data analytics."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Parquet"})," is columnar and compressed, speeding up queries and saving storage."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Delta Lake"})," builds on Parquet and adds ACID transactions, schema control, and time travel \u2014 perfect for reliable, fast analytics."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-best-practice",children:"\ud83d\ude80 Best Practice"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Always convert raw CSV/JSON to Delta or Parquet ASAP."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use Delta as your production data format for the best speed, compression, and reliability."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Partition large datasets (e.g., by date) for faster queries."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code Snippets"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Not recommended for big data\r\ndf.write.format("csv").save("/mnt/raw/sales_data")\r\n\r\n# Better: Parquet\r\ndf.write.format("parquet").mode("overwrite").save("/mnt/bronze/sales_data")\r\n\r\n# Best practice: Delta\r\ndf.write.format("delta").mode("overwrite").save("/mnt/silver/sales_data")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Quick Takeaway"}),(0,t.jsx)(n.br,{}),"\n","Use Delta for your analytics data. Avoid raw CSV/JSON beyond ingestion. It\u2019s the barcode scanner of data formats \u2014 fast, efficient, and reliable."]}),"\n",(0,t.jsx)(n.h2,{id:"-1-minute-summary-performance-optimization",children:"\ud83d\udd11 1-Minute Summary: performance-optimization"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.th,{children:["\ud83d\udd27 ",(0,t.jsx)(n.strong,{children:"Technique"})]}),(0,t.jsxs)(n.th,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Best For"})]}),(0,t.jsxs)(n.th,{children:["\u26a0\ufe0f ",(0,t.jsx)(n.strong,{children:"Watch Out For"})]})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Partitioning"})}),(0,t.jsxs)(n.td,{children:["Low-cardinality columns (e.g., ",(0,t.jsx)(n.code,{children:"date"}),", ",(0,t.jsx)(n.code,{children:"region"}),")"]}),(0,t.jsx)(n.td,{children:"Too many partitions \u2192 small files \u2192 worse performance"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Z-Ordering"})}),(0,t.jsxs)(n.td,{children:["High-cardinality filter columns (e.g., ",(0,t.jsx)(n.code,{children:"customer_id"}),", ",(0,t.jsx)(n.code,{children:"product_id"}),")"]}),(0,t.jsxs)(n.td,{children:["Requires compute-heavy ",(0,t.jsx)(n.code,{children:"OPTIMIZE"}),"; not real-time"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Use Both Together"})}),(0,t.jsx)(n.td,{children:"Partition by date, Z-Order by customer_id"}),(0,t.jsx)(n.td,{children:"Use when both filter types are common"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Caching"})}),(0,t.jsx)(n.td,{children:"Interactive queries, repeated dashboard reads"}),(0,t.jsxs)(n.td,{children:["Needs enough memory; must manually trigger with ",(0,t.jsx)(n.code,{children:".cache()"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Materialized Views"})}),(0,t.jsx)(n.td,{children:"Stable aggregated data (e.g., daily revenue)"}),(0,t.jsx)(n.td,{children:"Can become stale; needs manual/scheduled refresh"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Data Skipping"})}),(0,t.jsxs)(n.td,{children:["Filtering by min/max-aware columns (e.g., ",(0,t.jsx)(n.code,{children:"order_date"}),")"]}),(0,t.jsx)(n.td,{children:"Less effective with many small files"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Auto Optimize + Compaction"})}),(0,t.jsx)(n.td,{children:"Streaming, frequent micro-batches, CDC"}),(0,t.jsx)(n.td,{children:"Not needed for static, full-refresh datasets"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Cluster Sizing"})}),(0,t.jsx)(n.td,{children:"Matching workload to right compute size"}),(0,t.jsx)(n.td,{children:"Too small \u2192 slow; too big \u2192 expensive waste"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Photon Engine"})}),(0,t.jsx)(n.td,{children:"SQL, Delta, BI queries"}),(0,t.jsx)(n.td,{children:"Not all workloads benefit; needs enabling"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"File Format Optimization"})}),(0,t.jsx)(n.td,{children:"Analytics workloads on large data volumes"}),(0,t.jsx)(n.td,{children:"CSV/JSON slow and heavy \u2192 use Delta/Parquet"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(6540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);